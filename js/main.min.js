document.addEventListener("DOMContentLoaded",function(){
  const navLinks=document.querySelectorAll("a[data-link]");
  const content=document.getElementById("content");
  const contrastBtn=document.getElementById("toggle-contrast");
  const darkModeBtn=document.getElementById("toggle-dark");
  const focusable=document.querySelectorAll("a,button,input,textarea,select");

  function loadPage(page){
    fetch(`./js/templates/${page}.html`).then(res=>res.text()).then(data=>{
      content.innerHTML=data;
      content.focus();
    }).catch(()=>{content.innerHTML="<p>Erro ao carregar p√°gina.</p>";});
  }

  navLinks.forEach(link=>{
    link.addEventListener("click",e=>{
      e.preventDefault();
      const page=link.getAttribute("data-link");
      loadPage(page);
      history.pushState({page:page},"",page);
    });
  });

  window.addEventListener("popstate",e=>{
    if(e.state&&e.state.page){loadPage(e.state.page);}
  });

  if(contrastBtn){
    contrastBtn.addEventListener("click",()=>{
      document.body.classList.toggle("high-contrast");
    });
  }

  if(darkModeBtn){
    darkModeBtn.addEventListener("click",()=>{
      document.body.classList.toggle("dark-mode");
    });
  }

  focusable.forEach(el=>{
    el.addEventListener("focus",()=>{el.classList.add("focused");});
    el.addEventListener("blur",()=>{el.classList.remove("focused");});
  });

  loadPage("inicio");
});

